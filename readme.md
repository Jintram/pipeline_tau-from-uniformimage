

# Description

For screening purposes, many samples have been imaged, which are measuring a uniform (cell lysate) lifetime signal. 
The goal of this script is to provide an easy way to convert a set of images to a set of lifetimes.

## Installation / dependencies

This script requires the following libraries to be installed:

```
pandas
skimage
numpy
seaborn
matplotlib
adjustText # not essential, only for plotting
```

The script was run on my computer using the environment `2024_FLIM`, which can also be installed completely by downloading and installing the appropriate conda environment using my repository with [conda environments](https://github.com/Jintram/conda-environments).

## Walkthrough

### Input files

The script requires there to be .tif input files generated by LAS-X, where a scaling has been set to 
0-10.000 (the latter number here being ten as I currently understand). Another range could also be chosen,
but then the parameter `CONVERSION_FACTOR` defined in the script needs to be changed.

It is assumed that for sample, there are two measurements, and they can be coupled using the "Sample" and "Condition" 
columns in the metadata file (see below).

### Metadata

The following columns need to be defined in the metadata file:

- [Analysis_ID] A string that is used later to give output files and dirs a recognizable name.
- [Datadir File] Directory with data, potentially with subdirectories, which can be defined per sample in the subdir column.
- [Sample] Sample name, used in plots for identification
- [File] Tif filename for this sample, without the .tif extension. (.tif extensions are assumed though.)
- [Condition] For each Sample, it is assumed there are two measurements, which are identified by "Condition". "Condition" should have one of two values, which you can define yourself.
- [Condition_int] These two conditions should also be represented by integer numbers, ie 0 and 1, in this column.
- [subdir] See "Datadir"

Example:

| Analysis_ID | Datadir | File | Sample | Condition | Condition_int | subdir |
| ----------- | ------- | ---- | ------ | --------- | ------------- | ------ |
| <analysis_name> | /path/to/data | file_A11_0 | A11 | No reagent | 0 | no_reagent_sample |
|                 | /path/to/data | file_A11_1 | A11 | With reagent | 1 | no_reagent_sample |
| <analysis_name> | /path/to/data | file_A12_0 | A12 | No reagent | 0 | no_reagent_sample |
|                 | /path/to/data | file_A12_1 | A12 | With reagent | 1 | no_reagent_sample |

### Install the script



TO DO: edit this text
Now analyze a set of files defined by the metadata file
Within the metadata file, you can also set a unique idenfifier, which will be used 
to create a subdirectory where the output will be placed.
A metadata file can hold as many samples as you want, and by changing the "datadir"
column, you can analyze data from different directories.


'''
This functions simply loads the metadata table and creates an output table.

Metadata should have the following columns:
Analysis_ID	    This can be any string and will be used to store output related to this analysis.
Datadir	        Directory with data, potentially with subdirectories, which can be defined per sample in the subdir column.
File	        Filename of the image, without extension
Sample	        Sample name, used in plots for identification
Condition	    Condition of the sample, used to calculate differences between conditions, can be any string
Condition_int	Condition labels as integers (usually 0 and 1)
subdir          See "Datadir"
'''
